<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="pandoc" />

        <meta name="author" content="Caliper Corporation" />
    
        <meta name="date" content="2021-03-15" />
    
    <title>On-board Survey Processing</title>

        <script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="site_libs/bootstrap-3.3.7/css/bootstrap.min.css" rel="stylesheet" />
    <script src="site_libs/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
    <script src="site_libs/navigation-1.1/tabsets.js"></script>
    <link href="site_libs/magnific-popup-1.1.0/magnific-popup.css" rel="stylesheet" />
    <script src="site_libs/magnific-popup-1.1.0/jquery.magnific-popup.min.js"></script>
    <link href="site_libs/readthedown-0.1/readthedown.css" rel="stylesheet" />
    <link href="site_libs/readthedown-0.1/readthedown_fonts_embed.css" rel="stylesheet" />
    <script src="site_libs/readthedown-0.1/readthedown.js"></script>
    <script src="site_libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
    <script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
    <link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
    
    
    
        <link rel="stylesheet" href="styles.css" type="text/css" />
    
    <!-- tabsets -->
    <script>
      $(document).ready(function () {
	  window.buildTabsets("toc");
      });
      $(document).ready(function () {
	  $('.tabset-dropdown > .nav-tabs > li').click(function () {
	      $(this).parent().toggleClass('nav-tabs-open')
	  });
      });
    </script>

    <!-- code folding -->
    
    <!-- code download -->
    
    <!-- tabsets dropdown -->

    <style type="text/css">
      .tabset-dropdown > .nav-tabs {
	  display: inline-table;
	  max-height: 500px;
	  min-height: 44px;
	  overflow-y: auto;
	  background: white;
	  border: 1px solid #ddd;
	  border-radius: 4px;
      }
      
      .tabset-dropdown > .nav-tabs > li.active:before {
	  content: "";
	  font-family: 'Glyphicons Halflings';
	  display: inline-block;
	  padding: 10px;
	  border-right: 1px solid #ddd;
      }
      
      .tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
	  content: "&#xe258;";
	  border: none;
      }
      
      .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
	  content: "";
	  font-family: 'Glyphicons Halflings';
	  display: inline-block;
	  padding: 10px;
	  border-right: 1px solid #ddd;
      }
      
      .tabset-dropdown > .nav-tabs > li.active {
	  display: block;
      }

      .tabset-dropdown > .nav-tabs > li.active a {
  	  padding: 0 15px !important;
      }

      .tabset-dropdown > .nav-tabs > li > a,
      .tabset-dropdown > .nav-tabs > li > a:focus,
      .tabset-dropdown > .nav-tabs > li > a:hover {
	  border: none;
	  display: inline-block;
	  border-radius: 4px;
	  background-color: transparent;
      }
      
      .tabset-dropdown > .nav-tabs.nav-tabs-open > li {
	  display: block;
	  float: none;
      }
      
      .tabset-dropdown > .nav-tabs > li {
	  display: none;
	  margin-left: 0 !important;
      }
    </style>
    
</head>

<body class="preload">

            <!-- readthedown start -->   
   <div id="content" data-toggle="wy-nav-shift">
     <nav id="nav-top" role="navigation" aria-label="top navigation">
       <a role="button" href="#" data-toggle="wy-nav-top"><span class="glyphicon glyphicon-menu-hamburger"></span></a>
     </nav>
         
   
      
   <div class="navbar navbar-default  navbar-fixed-top" role="navigation">
     <div class="container">
       <div class="navbar-header">
         <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
           <span class="icon-bar"></span>
           <span class="icon-bar"></span>
           <span class="icon-bar"></span>
         </button>
         <a class="navbar-brand" href="index.html">TRMG2</a>
       </div>
       <div id="navbar" class="navbar-collapse collapse">
         <ul class="nav navbar-nav">
           <li class="dropdown">
     <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
       Databases
        
       <span class="caret"></span>
     </a>
     <ul class="dropdown-menu" role="menu">
       <li>
         <a href="tazs_and_se_data.html">TAZs and SE Data</a>
       </li>
       <li>
         <a href="networks.html">Networks</a>
       </li>
     </ul>
   </li>
   <li class="dropdown">
     <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
       Surveys
        
       <span class="caret"></span>
     </a>
     <ul class="dropdown-menu" role="menu">
       <li>
         <a href="survey_processing.html">Household Survey</a>
       </li>
       <li>
         <a href="obs_processing.html">On-Board Survey</a>
       </li>
     </ul>
   </li>
   <li class="dropdown">
     <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
       Resident Models
        
       <span class="caret"></span>
     </a>
     <ul class="dropdown-menu" role="menu">
       <li>
         <a href="population_synthesis.html">Synthesis</a>
       </li>
       <li>
         <a href="auto_ownership.html">Auto Ownership</a>
       </li>
       <li>
         <a href="resident_production.html">Production</a>
       </li>
       <li>
         <a href="time_of_day.html">Time of Day</a>
       </li>
       <li>
         <a href="resident_nonmotorized.html">Non-motorized</a>
       </li>
       <li>
         <a href="parking.html">Parking</a>
       </li>
       <li>
         <a href="resident_dest_choice.html">Destination Choice</a>
       </li>
       <li>
         <a href="nhb.html">Non-homebased</a>
       </li>
     </ul>
   </li>
   <li class="dropdown">
     <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
       Other Models
        
       <span class="caret"></span>
     </a>
     <ul class="dropdown-menu" role="menu">
       <li>
         <a href="accessibility.html">Accessibility</a>
       </li>
       <li>
         <a href="airport.html">Airport</a>
       </li>
       <li>
         <a href="ieei.html">Internal/External</a>
       </li>
       <li>
         <a href="commercial_vehicles.html">Commercial Vehicles</a>
       </li>
       <li>
         <a href="assignment_roadway.html">Roadway Assignment</a>
       </li>
     </ul>
   </li>
         </ul>
         <ul class="nav navbar-nav navbar-right">
           <li>
     <a href="https://github.com/Caliper-Corporation/TRMG2">Github</a>
   </li>
         </ul>
       </div><!--/.nav-collapse -->
     </div><!--/.container -->
   </div><!--/.navbar -->
        
      <h1 class="title">On-board Survey Processing</h1>
      
         <!-- readthedown authors -->
   <div id="sidebar">
    <h2><a href="#content">On-board Survey Processing</a></h2>
    <div id="toc">
      <ul>
      <li><a href="#introduction">Introduction</a></li>
      <li><a href="#combining-surveys">Combining surveys</a></li>
      <li><a href="#geocoding">Geocoding</a></li>
      <li><a href="#reasonableness-checks">Reasonableness checks</a><ul>
      <li><a href="#agency">Agency</a></li>
      <li><a href="#time-of-day">Time of Day</a></li>
      <li><a href="#access-mode">Access Mode</a></li>
      <li><a href="#fare-type">Fare Type</a></li>
      </ul></li>
      <li><a href="#survey-assignment">Survey Assignment</a></li>
      </ul>
    </div>
    <div id="postamble" data-toggle="wy-nav-shift" class="status">
                  <p class="author"><span class="glyphicon glyphicon-user"></span> Caliper Corporation</p>
                        <p class="date"><span class="glyphicon glyphicon-calendar"></span> March 15, 2021</p>
          </div>
   </div>
   
   
      
   
<!-- Don't indent these lines or it will mess pre blocks indentation --> 
<div id="main">
<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>On-board surveys ask transit riders a series of question while they are on the bus in order to obtain detailed information about demographics, trip purpose, modes used, and other variables. These targeted surveys are critical for understanding transit users in the region. Due to the small size of the transit market in the Triangle and the small household survey sample size, the household survey does not contain enough transit trips to estimate the behavior of these travelers.</p>
<p>In the Triangle, a survey of GoTriangle and DCHC transit was conducted in 2014 (excluding Duke Transit). CAMPO agencies were surveyed in 2015 along with new GoTriangle routes. These are used to gain insight into the transit market.</p>
</div>
<div id="combining-surveys" class="section level2">
<h2>Combining surveys</h2>
<p>Unlike the household surveys, the transit surveys were collected by different companies. Combining the surveys required translating the different field codes from each into a combined set of values. The surveys collected the same basic information, which made this process easier. Additionally, because different routes were collected in each survey, no routes were double counted and no adjustments to the sample weights were needed.</p>
</div>
<div id="geocoding" class="section level2">
<h2>Geocoding</h2>
<p>As with the household survey, the transit trip latitude/longitude values were translated into TRMG2 TAZs. For a transit trip, this includes the home, origin, destination, boarding, and alighting locations. A sample of this is shown in the table below:</p>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
route
</th>
<th style="text-align:right;">
weight
</th>
<th style="text-align:right;">
home_taz
</th>
<th style="text-align:right;">
orig_taz
</th>
<th style="text-align:right;">
board_taz
</th>
<th style="text-align:right;">
alight_taz
</th>
<th style="text-align:right;">
dest_taz
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Route 2: Falls of Neuse- INBOUND toward Downtown
</td>
<td style="text-align:right;">
6.76
</td>
<td style="text-align:right;">
1448
</td>
<td style="text-align:right;">
2651
</td>
<td style="text-align:right;">
2542
</td>
<td style="text-align:right;">
1429
</td>
<td style="text-align:right;">
1935
</td>
</tr>
<tr>
<td style="text-align:left;">
Route 1: Capital- OUTBOUND toward Triangle Town Center
</td>
<td style="text-align:right;">
7.45
</td>
<td style="text-align:right;">
1781
</td>
<td style="text-align:right;">
1435
</td>
<td style="text-align:right;">
1429
</td>
<td style="text-align:right;">
1446
</td>
<td style="text-align:right;">
1448
</td>
</tr>
<tr>
<td style="text-align:left;">
Route 2: Falls of Neuse- INBOUND toward Downtown
</td>
<td style="text-align:right;">
6.76
</td>
<td style="text-align:right;">
1467
</td>
<td style="text-align:right;">
1700
</td>
<td style="text-align:right;">
1699
</td>
<td style="text-align:right;">
1429
</td>
<td style="text-align:right;">
1467
</td>
</tr>
<tr>
<td style="text-align:left;">
C-Tran: Route 2: COUNTERCLOCKWISE
</td>
<td style="text-align:right;">
2.83
</td>
<td style="text-align:right;">
1892
</td>
<td style="text-align:right;">
1892
</td>
<td style="text-align:right;">
1874
</td>
<td style="text-align:right;">
2209
</td>
<td style="text-align:right;">
2209
</td>
</tr>
<tr>
<td style="text-align:left;">
C-Tran: Route 4: OUTBOUND toward NC Hwy 55
</td>
<td style="text-align:right;">
2.73
</td>
<td style="text-align:right;">
2339
</td>
<td style="text-align:right;">
2335
</td>
<td style="text-align:right;">
2269
</td>
<td style="text-align:right;">
2326
</td>
<td style="text-align:right;">
2339
</td>
</tr>
<tr>
<td style="text-align:left;">
C-Tran: Route 5: INBOUND toward Train Station
</td>
<td style="text-align:right;">
2.45
</td>
<td style="text-align:right;">
1646
</td>
<td style="text-align:right;">
2180
</td>
<td style="text-align:right;">
2180
</td>
<td style="text-align:right;">
2269
</td>
<td style="text-align:right;">
1646
</td>
</tr>
</tbody>
</table>
</div>
<div id="reasonableness-checks" class="section level2 tabset">
<h2>Reasonableness checks</h2>
<p>A high level review of the combined survey was performed to make sure processing had not introduced errors. Some of those checks are shown in the charts below. All dimensions checked looked reasonable.</p>
<div id="agency" class="section level3">
<h3>Agency</h3>
<p><img src="obs_processing_files/figure-html/unnamed-chunk-12-1.png" width="768" /></p>
</div>
<div id="time-of-day" class="section level3">
<h3>Time of Day</h3>
<p><img src="obs_processing_files/figure-html/unnamed-chunk-13-1.png" width="768" /></p>
</div>
<div id="access-mode" class="section level3">
<h3>Access Mode</h3>
<p><img src="obs_processing_files/figure-html/unnamed-chunk-14-1.png" width="768" /></p>
</div>
<div id="fare-type" class="section level3">
<h3>Fare Type</h3>
<p><img src="obs_processing_files/figure-html/unnamed-chunk-15-1.png" width="768" /></p>
</div>
</div>
<div id="survey-assignment" class="section level2">
<h2>Survey Assignment</h2>
<p>For an additional check on both the on-board survey processing and the model’s route network, the on-board survey was assigned. This involved processing the survey into the appropriate matrices by time of day, transit mode, and accesss mode. The model assignment macros in TransCAD were used to assign these to the route system, and the results were compared to reported ridership by route.</p>
<p>The percent root mean square error (%RMSE) for route-level boardings was 96.8%. The agency-level %RMSE was 52.63%. The table below shows the agency-level comparison.</p>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Agency
</th>
<th style="text-align:right;">
Observed
</th>
<th style="text-align:right;">
Modelled
</th>
<th style="text-align:right;">
Difference
</th>
<th style="text-align:right;">
Absolute Difference
</th>
<th style="text-align:right;">
Percent Difference
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
CAT
</td>
<td style="text-align:right;">
23,218
</td>
<td style="text-align:right;">
39,299
</td>
<td style="text-align:right;">
16,081
</td>
<td style="text-align:right;">
16,081
</td>
<td style="text-align:right;">
69.26
</td>
</tr>
<tr>
<td style="text-align:left;">
CHT
</td>
<td style="text-align:right;">
26,371
</td>
<td style="text-align:right;">
21,407
</td>
<td style="text-align:right;">
-4,964
</td>
<td style="text-align:right;">
4,964
</td>
<td style="text-align:right;">
-18.82
</td>
</tr>
<tr>
<td style="text-align:left;">
CTRAN
</td>
<td style="text-align:right;">
1,003
</td>
<td style="text-align:right;">
1,805
</td>
<td style="text-align:right;">
802
</td>
<td style="text-align:right;">
802
</td>
<td style="text-align:right;">
79.96
</td>
</tr>
<tr>
<td style="text-align:left;">
DATA
</td>
<td style="text-align:right;">
21,601
</td>
<td style="text-align:right;">
24,554
</td>
<td style="text-align:right;">
2,953
</td>
<td style="text-align:right;">
2,953
</td>
<td style="text-align:right;">
13.67
</td>
</tr>
<tr>
<td style="text-align:left;">
NCSU
</td>
<td style="text-align:right;">
16,699
</td>
<td style="text-align:right;">
18,255
</td>
<td style="text-align:right;">
1,556
</td>
<td style="text-align:right;">
1,556
</td>
<td style="text-align:right;">
9.32
</td>
</tr>
<tr>
<td style="text-align:left;">
TT
</td>
<td style="text-align:right;">
9,184
</td>
<td style="text-align:right;">
15,399
</td>
<td style="text-align:right;">
6,215
</td>
<td style="text-align:right;">
6,215
</td>
<td style="text-align:right;">
67.67
</td>
</tr>
</tbody>
</table>
<p>These differences are large, but manual path checking did not uncover any errors. This test assignment was performed on a network with a rough initial guess of travel times, which likely contributed to these differences. Further differences may be because the surveys were from 2014 and 2015 while the transit network is 2016. Any changes in route alignments or offerings would lead to higher discrepancies.</p>
<p>More attention will be paid to agency- and route-level ridership comparisons during model validation. It may be that fares or other route attributes received from stakeholders need to be adjusted. One positive result of this early test was that all routes received ridership, which indicates no critical accessibility flaws in the network.</p>
</div>
</div>

   
      <br>
   <br>
   <br>
   <hr>
   <p><a href="https://www.caliper.com/">Caliper Corporation</a>, 2022</p>
   
            
      

  <script>
    $(document).ready(function () {

			
 		
	    });
  </script>



    <!-- dynamically load mathjax for compatibility with self-contained -->
  <script>
    (function () {
	var script = document.createElement("script");
	script.type = "text/javascript";
	script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
	document.getElementsByTagName("head")[0].appendChild(script);
    })();
  </script>
  
</body>
</html>
